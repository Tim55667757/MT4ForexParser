language: python
python: '3.7'
branches:
  only:
  - master
  - develop
install:
  - pip install pytest coverage codacy-coverage pandas
script:
  - cd ./tests
  - coverage run -m py.test .
  - coverage xml
  - if [[ ! $CODACY_PROJECT_TOKEN ]]; then echo "Variable CODACY_PROJECT_TOKEN not set. Step is skipped."; exit 0; else python-codacy-coverage -r coverage.xml; fi
deploy:
  provider: pypi
  user: tim55667757
  password:
    secure: ""
  distributions: sdist bdist_wheel
  on:
    all_branches: true
  skip_cleanup: true
after_script:
  - echo "Deploy to PyPI finished."
env:
  global:
  - secure: ""